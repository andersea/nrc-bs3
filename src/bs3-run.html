<script type='text/x-red' data-template-name='bs3-run'>
    <div class='form-row'>
        <label for='node-input-config'><i class='fa fa-database'></i> Database</label>
        <input type='text' id='node-input-config'>
    </div>
    <div class='form-row node-text-editor-row'>
        <label for='node-input-query'><i class='fa fa-database'></i> Insert statement</label>
        <div style='height: 250px; min-height:150px;' class='node-text-editor' id='node-input-query'></div>
    </div>
    <div class='form-row'>
        <label for='node-input-name'><i class='fa fa-tag'></i> Name</label>
        <input type='text' id='node-input-name' placeholder='Name'>
    </div>
</script>

<script type='text/x-red' data-help-name='bs3-run'>
    <p>Executes a prepared statement using the run method.</p>
    <p>The query to execute is entered in the <code>Query</code> field in node properties.</p>
    <p><code>msg.payload</code> can contain parameters to bind on execution.</p>
    <p>Any return value from running the statement is delivered in <code>msg.payload</code></p>
    <p>See better-sqlite3 <a href="https://github.com/JoshuaWise/better-sqlite3/wiki/API#runbindparameters---object">api docs</a>        for more info.</p>
</script>

<script type='text/javascript'>
    RED.nodes.registerType('bs3-run', {
        category: 'storage',
        color: '#3FADB5',
        defaults: {
            config: { type: 'bs3-config', required: true },
            query: { value: '' },
            name: { value: '' }
        },
        inputs: 1,
        outputs: 1,
        icon: 'sqlite.png',
        label: function () {
            var configNode = RED.nodes.node(this.config);
            return this.name || (configNode ? configNode.label() : 'bs3-run');
        },
        labelStyle: function () {
            return this.name ? 'node_label_italic' : '';
        },
    });

</script>